SELECT c.nombre AS nombre_cliente, SUM(g.precio) AS total_compras FROM optica.clientes c JOIN optica.ventas v ON c.id = v.cliente_id JOIN optica.gafas g ON v.gafas_id = g.id WHERE c.id = 1;
SELECT DISTINCT v.id AS venta_id, e.nombre AS empleado_nombre, g.id AS gafas_id, m.nombre AS marca_nombre, g.montura, g.color_montura, g.color_cristal_dch, g.color_cristal_izq, g.precio, v.fecha FROM optica.ventas v JOIN optica.empleado e ON v.empleado_id = e.id JOIN optica.gafas g ON v.gafas_id = g.id JOIN optica.marca m ON g.marca_id = m.id WHERE YEAR(v.fecha) = 2023;
SELECT DISTINCT pr.id AS proveedor_id, pr.nombre AS proveedor_nombre, g.id AS gafas_id, m.nombre AS marca_nombre, g.precio FROM optica.proveedor pr JOIN optica.marca m ON pr.id = m.proveedor_id JOIN optica.gafas g ON m.id = g.marca_id JOIN optica.ventas v ON g.id = v.gafas_id;
